{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Listado de Camiones</title>

    <!-- CSS externo -->
    <link rel="stylesheet" href="{% static 'core/css/camiones.css' %}">
</head>
<body>

<h1>Listado de Camiones</h1>

<table class="tabla-camiones">
    <thead>
        <tr>
            <th>Patente</th>
            <th>Tipo</th>
            <th>Rol</th>
            <th>Activo</th>
            <th>Estado Operativo</th>
            <th>Mantención</th>
            <th>Conductor</th>
        </tr>
    </thead>

    <tbody>
        {% for camion in camiones %}
        <tr class="{{ camion.estado_mantencion.css }}">

            <!-- Patente -->
            <td>
                <a href="{% url 'camion_detail' camion.id_camion %}">
                    {{ camion.patente }}
                </a>
            </td>

            <!-- Tipo -->
            <td>{{ camion.tipo_camion }}</td>

            <!-- Rol -->
            <td>{{ camion.rol_operativo }}</td>

            <!-- Activo -->
            <td>
                {% if camion.activo %}
                    Sí
                {% else %}
                    No
                {% endif %}
            </td>

            <!-- Estado operativo -->
            <td>
                {% if camion.estado_actual %}
                    {{ camion.estado_actual.estado_operativo }}
                {% else %}
                    —
                {% endif %}
            </td>

            <!-- Mantención (urgencia) -->
            <td class="estado-mantencion">
                {{ camion.estado_mantencion.label }}
            </td>

            <!-- Conductor -->
            <td>
                {% if camion.estado_actual and camion.estado_actual.conductor %}
                    {{ camion.estado_actual.conductor }}
                {% else %}
                    —
                {% endif %}
            </td>

        </tr>
        {% empty %}
        <tr>
            <td colspan="7">No hay camiones registrados.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</body>
</html>
